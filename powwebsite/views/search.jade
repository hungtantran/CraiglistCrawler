extends layout

block content
    div(id='left-padding'            class='hidden-xs col-sm-2 col-md-3 col-lg-3')
    div(id='right_pane'              class='col-xs-12 col-sm-8 col-md-6 col-lg-6')
      div(class='col-xs-12 col-sm-12 col-md-12 col-lg-12')
        h3(style='underlined')
          | Search results:

      div(id='right_pane_content')
        table(id='latest_prices_content' class='table table-striped table-condensed table-responsive')
          thead
            tr
              th(class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-center")
                | Date/Locations
              th(class="col-xs-8 col-sm-8 col-md-6 col-lg-6 text-center")
                | Post title
              th(class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-center")
                | Quantities
              th(class="hidden-xs hidden-sm col-md-2 col-lg-2 text-center")
                | Prices
          tbody(id='table_body')
            - for (var i = 0; i < results.length; ++i) {
              - posting = results[i]
              - priceString = pricesString[i]
              - quantityString = quantitiesString[i]
              if (posting['city'])
                tr
                  td(class="col-xs-2 col-sm-2 col-md-2 col-lg-2")
                    = posting['datePosted'] + " - " + posting['city']
                  td(class="col-xs-8 col-sm-8 col-md-6 col-lg-6 text-center")
                    strong
                      = posting['title']
                  td(class="col-xs-2 col-sm-2 col-md-2 col-lg-2")
                    != '<a href="/posting/'
                    = posting['url']
                    != '">'
                    if (posting['quantity'] == null)
                      | Check Quantity!
                    else
                      = quantityString
                    != '</a>'
                  td(class="hidden-xs hidden-sm col-md-2 col-lg-2")
                    != '<a href="/posting/'
                    = posting['url']
                    != '">'
                    if (posting['price'] == null)
                      | Check Price!
                    else
                      = priceString
                    != '</a>'
            - }
      .bs-example
        ul.pagination
            li
              a(href="#")
                | &laquo; Previous Page
            li
              a(href="#")
                | Next Page &raquo;
    div(id='left-padding'            class='hidden-xs col-sm-2 col-md-3 col-lg-3')

    script(type='text/javascript')
      | var map = null;
      | var markerArray = [];

      | var cache = [];

      | var stateFilter = null;
      | var geocoder = null;
      | var lat_ = !{JSON.stringify(latitude)};
      | var long_ = !{JSON.stringify(longitude)};
      | var state_ = !{JSON.stringify(state)};
      | var city_ = !{JSON.stringify(city)};
      | window.onload = loadData();