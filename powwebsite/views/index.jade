extends layout

block content
    div(class='row' id ='content')
      div(id='left_pane' class='col-xs-12 col-sm-12 col-md-7 col-lg-8')
        div(id='map-canvas')

        div(id='price_bin' class='hidden-xs')
          div(id='price_bin_dist_by_state')

      div(class='clearfix visible-xs-block')

      div(id='right_pane' class='col-xs-12 col-sm-12 col-md-5 col-lg-4')
        h2(style='font-size:1.5em; font-weight:bold')
          | Marijuana Sale Postings
        table(id='latest_prices_content' class='table table-striped table-condensed table-responsive')
          thead
            tr
              th(style='width: 35%')
                | Date/Locations
              th(style='width: 30%')
                | Quantities Sold
              th(style='width: 35%')
                | Extracted Prices
        div(id='right_pane_content')
          table(id='latest_prices_content' class='table table-striped table-condensed table-responsive')
            tbody(id='table_body')
              - for (var i = 0; i < postings.length; ++i) {
                - posting = postings[i]
                - priceString = pricesString[i]
                - quantityString = quantitiesString[i]
                if (posting['city'])
                  tr
                    td(style='width: 16%')
                      = posting['datePosted']
                    td(style='width: 14%')
                      = posting['city']
                    td(style='width: 35%')
                      if (posting['quantity'] == null)
                        | Check Quantity!
                      else
                        = quantityString
                    td(style='width: 35%')
                      != '<a href="/posting/'
                      = posting['url']
                      != '"">'
                      if (posting['price'] == null)
                        | Check Price!
                      else
                        = priceString
                      != '</a>'
              - }

    script(type='text/javascript')
      | var map = null;
      | var markerClusterer = null;
      | var markerArray = [];

      | var cache = [];

      | var mapBound = null;
      | var stateFilter = null;
      | window.onload = loadData();
