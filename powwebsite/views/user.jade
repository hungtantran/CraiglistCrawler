extends layout

block content
    div(class='col-xs-3 col-sm-3 col-md-3 col-lg-3' style="padding:0px 0px")
      ul(class='nav nav-tabs-user')
        li
          a(data-toggle='tab' href='#sectionA')
            | My Sales
        li
          a(data-toggle='tab' href='#sectionB')
            | My Purchases
        li
          a(data-toggle='tab' href='#sectionC')
            | Payment
        li
          a(data-toggle='tab' href='#sectionD')
            | Log Out


    div(class='tab-content')
      div(id='sectionA' class='tab-pane fade in active')
        div(class='col-xs-9 col-sm-9 col-md-9 col-lg-9')
          div(id="title" style="text-align: center; font-size: 1.5em; font-weight: 500")
            br
            | MY SALES
            br
            br
          
          div(id="myExchanges" style='height:80%')
            table(id='latest_prices_content' class='table table-striped table-condensed table-responsive')
             thead
               tr
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Exchange
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-center")
                   | User
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-right")
                   | Amount
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Quantity
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Strain
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | City
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Payment Method

            div(id='right_pane_content')
             table(id='latest_exchanges_content' class='table table-striped table-condensed table-responsive')
               tbody(id='table_body_posting')
                 - if (sales.length == 0) {
                     | <tr><td class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><a href='/state/all'>No Transactions</a></td></tr>
                 - }
                 - for (var i = 0; i < sales.length; ++i) {
                   - if (i > 50) {
                       | <tr><td class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><a href='javascript:void' onclick='updateDisplay();'>See more</a></td></tr>
                   -   break
                   - }
                   - line = sales[i]
                   tr
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1")
                      = line['transaction_date']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-center")
                      = session.user['username']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-right")
                      = line['amount']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                      = line['quantity'] + ' ' + line['unit']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1")
                      = line['product_name']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                      = line['city']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                      = line['payment_method']
                 - }
      div(id='sectionB' class='tab-pane fade in active')
        div(class='col-xs-9 col-sm-9 col-md-9 col-lg-9')
          div(id="title" style="text-align: center; font-size: 1.5em; font-weight: 500")
            br
            | MY PURCHASES
            br
            br
          
          div(id="myExchanges" style='height:80%')
            table(id='latest_prices_content' class='table table-striped table-condensed table-responsive')
             thead
               tr
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Exchange
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-center")
                   | User
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-right")
                   | Amount
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Quantity
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Strain
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | City
                 th(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                   | Payment Method

            div(id='right_pane_content')
             table(id='latest_exchanges_content' class='table table-striped table-condensed table-responsive')
               tbody(id='table_body_posting')
                 - if (purchases.length == 0) {
                     | <tr><td class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><a href='/state/all'>No Transactions</a></td></tr>
                 - }
                 - for (var i = 0; i < purchases.length; ++i) {
                   - if (i > 50) {
                       | <tr><td class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><a href='javascript:void' onclick='updateDisplay();'>See more</a></td></tr>
                   -   break
                   - }
                   - line = purchases[i]
                   tr
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1")
                      = line['transaction_date']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-center")
                      = session.user['username']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-right")
                      = line['amount']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                      = line['quantity'] + ' ' + line['unit']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1")
                      = line['product_name']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                      = line['city']
                     td(class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-left")
                      = line['payment_method']
                 - }
      div(id='sectionC' class='tab-pane fade in active')
      div(id='sectionD' class='tab-pane fade in active')
      

    script(type='text/javascript')
      | var map = null;
      | var markerClusterer = null;
      | var markerArray = [];

      | var cache = [];

      | var mapBound = null;
      | var stateFilter = null;
      | var state = null;
      | var timeoutID = null;
      | var geocoder = null;
      | var curLatLng = null;
      | window.onload = loadData();
